{% load static %}
{% include "templates/headheader.html" %}
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css"
    integrity="sha384-9gVQ4dYFwwWSjIDZnLEWnxCjeSWFphJiwGPXr1jddIhOegiu1FwO5qRGvFXOdJZ4" crossorigin="anonymous">
<link rel="stylesheet" href="{% static "css/admin.css" %}">
</head>

<body>
    <div class="main__section">
        <div class="row">
            <div class="col-lg-2 col-md-2 col-sm-2">
                <div class="wrapper ">
                    <!-- Sidebar  -->
                    <nav id="sidebar">
                        <div class="sidebar-header">
                            <h3>Admin</h3>
                        </div>
                        <!-- <div class="list-group" id="list-tab" role="tablist"> -->
                        <ul class="list-unstyled components">
                            <li>
                                <div class="list-group" id="list-tab" role="tablist">
                                    <a class="special active" id="list-home-list" data-toggle="list" href="#list-home"
                                        role="tab" aria-controls="home">Home</a>
                                </div>
                            </li>
                            <!-- pending content  -->
                            <li>
                                <a href="#homeSubmenu" data-toggle="collapse" aria-expanded="false"
                                    class="dropdown-toggle">Pending</a>
                                <ul class="collapse list-unstyled list-group" id="homeSubmenu" role="tablist">
                                    <li>
                                        <a class="special" id="list-movie-list" data-toggle="list" href="#list-movie"
                                            role="tab" aria-controls="movie">Movies</a>
                                    </li>
                                    <li>
                                        <a class="special" id="list-series-list" data-toggle="list" href="#list-series"
                                            role="tab" onclick="get_series()" aria-controls="series">series</a>
                                    </li>
                                </ul>
                            </li>
                            <!-- verified content  -->
                            <li>
                                <a href="#addedContentSubmenu" data-toggle="collapse" aria-expanded="false"
                                    class="dropdown-toggle">Added content</a>
                                <ul class="collapse list-unstyled list-group" id="addedContentSubmenu" role="tablist">
                                    <li>
                                        <a class="special" id="list-added-movie-list" data-toggle="list"
                                            href="#list-added-movie" role="tab" aria-controls="movie">Movies</a>
                                    </li>
                                    <li>
                                        <a class="special" id="list-added-series-list" data-toggle="list"
                                            href="#list-added-series" role="tab" aria-controls="series">Series</a>
                                    </li>
                                </ul>
                            </li>
                            <li>
                                <a href="#pageSubmenu" data-toggle="collapse" aria-expanded="false"
                                    class="dropdown-toggle">Rejected content</a>
                                <ul class="collapse list-unstyled list-group" id="pageSubmenu" role="tablist">
                                    <li>
                                        <a class="special" id="list-settings-list" data-toggle="list"
                                            href="#list-settings" role="tab" aria-controls="settings">Rejected
                                            content</a>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </nav>
                </div>
            </div>
            <div class="col-lg-9 col-md-9 col-sm-9">
                <!-- content  to be displayed on the middle of the page-->
                <div class="tab-content" id="nav-tabContent">
                    <div class="tab-pane fade show active" id="list-home" role="tabpanel"
                        aria-labelledby="list-home-list">
                        <div class="row">
                            <div class="col-lg-7 col-md-7 col-sm-7">
                                <div id="section1">
                                    <h4>section1</h4>
                                    <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Est molestiae error
                                        ipsam
                                        asperiores pariatur animi? Optio, dolorem. Pariatur ducimus cupiditate sapiente
                                        dolor praesentium. Dolorem sequi animi earum, iusto dolor laborum.</p>
                                </div>
                                <div id="section2">
                                    <h4>section2</h4>
                                    <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Mollitia provident,
                                        repellendus accusantium odit est temporibus laborum hic error nisi earum saepe
                                        alias
                                        esse eum optio magnam, totam quidem quisquam corporis!</p>
                                </div>
                                <div id="section3">
                                    <h4>section3</h4>
                                    <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Atque adipisci excepturi
                                        sequi asperiores architecto ex sit ad nisi quibusdam pariatur similique dolorum
                                        quasi dolores debitis odio et, nam magnam amet?</p>
                                </div>
                            </div>
                            <div class="col-lg-2 col-md-2 col-sm-2">
                                <div class="fix">
                                    <ul>
                                        <li>
                                            <a href="#section1">section1</a>
                                        </li>
                                        <li>
                                            <a href="#section2">section2</a>
                                        </li>
                                        <li>
                                            <a href="#section3">section3</a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="tab-pane fade" id="list-movie" role="tabpanel" aria-labelledby="list-movie-list">Add
                        movie
                        form</div>
                    <div class="tab-pane fade" id="list-series" role="tabpanel" aria-labelledby="list-series-list">
                        <div class="series__form">
                            <div class="list-group flex-md-row" id="list-series-tab" role="tablist">
                                <a class="list-group-item list-group-item-action active mx-5 text-center"
                                    id="list-seriesform-list" data-toggle="list" href="#list-seriesform" role="tab"
                                    aria-controls="seriesform">Series</a>
                                <a class="list-group-item list-group-item-action mx-5 text-center"
                                    id="list-seriesinfo-list" data-toggle="list" href="#list-seriesinfo" role="tab"
                                    aria-controls="next">Seasons</a>
                                <a class="list-group-item list-group-item-action mx-5 text-center"
                                    id="list-seasoninfo-list" data-toggle="list" href="#list-seasoninfo" role="tab"
                                    aria-controls="next">Episodes</a>
                            </div>
                            <div class="tab-content my-5" id="nav-tabContent">
                                <div class="tab-pane fade show active" id="list-seriesform" role="tabpanel"
                                    aria-labelledby="list-home-list">
                                    <div class="series__info my-5">
                                        <div class="row">
                                            <div class="col-lg-9 col-md-9 col-sm-9">
                                                <div id="get-series">

                                                </div>
                                            </div>
                                            <div class="col-lg-3 col-md-3 col-sm-3">
                                                <div class="fix">
                                                    <ul id="series-right">

                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="tab-pane fade" id="list-seriesinfo" role="tabpanel"
                                    aria-labelledby="list-seriesinfo-list">
                                    <div class="season__info">
                                        <!-- info about series  -->
                                        <div id="server-series-result">

                                        </div>
                                        <div class="add__season">
                                            <p id="series_id" hidden></p>
                                            <div class="row">
                                                <div class="col-lg-9 col-md-9 col-sm-9">
                                                    <div id="apnd">
                                                        <div class="container my-5">
                                                            <h4 class="my-4">Series name</h4>
                                                            <div class="row">
                                                                <!-- thumbnail  -->
                                                                <div class="col-lg-6 col-md-6 col-sm-6">
                                                                    <img src="{% static "images/img.svg" %}"
                                                                        alt="uploading" class="img-fluid">
                                                                </div>
                                                                <!-- content  -->
                                                                <div class="col-lg-6 col-md-6 col-sm-6">
                                                                    <div class="content mx-3">
                                                                        <p class="text-muted">
                                                                            Language,Categories,Subcategories
                                                                        </p>
                                                                        <p class="text-muted">Description</p>
                                                                        <button type="button"
                                                                            onclick="move_to_episode(/*series_id,series_season_id*/)"
                                                                            class="btn btn-primary">naviagate
                                                                            to seasons</button>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <!-- right navigation  -->

                                                <div class="col-lg-3 col-md-3 col-sm-3">
                                                    <div class="fix">
                                                        <ul id="season-right">
                                                            <!-- <li>
                                                            <a href="#section1">section1</a>
                                                        </li>
                                                        <li>
                                                            <a href="#section2">section2</a>
                                                        </li>
                                                        <li>
                                                            <a href="#section3">section3</a>
                                                        </li> -->
                                                        </ul>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="tab-pane fade" id="list-seasoninfo" role="tabpanel"
                                    aria-labelledby="list-seasoninfo-list">
                                    <div class="episode__info">
                                        <div id="server-result">
                                        </div>
                                        <div class="row">
                                            <!-- add season videos  -->

                                            <div class="col-lg-9 col-md-9 col-sm-9 add__season__videos">
                                                <p id="series_season_id" hidden></p>
                                                <div id="uploaded_episodes">
                                                    <div class="container my-5">
                                                        <h4 class="my-4">Series name</h4>
                                                        <div class="row">
                                                            <!-- thumbnail  -->
                                                            <div class="col-lg-6 col-md-6 col-sm-6">
                                                                <img src="{% static "images/img.svg" %}" alt="uploading"
                                                                    class="img-fluid">
                                                            </div>
                                                            <!-- content  -->
                                                            <div class="col-lg-6 col-md-6 col-sm-6">
                                                                <div class="content mx-3">
                                                                    <p class="text-muted">
                                                                        Language,Categories,Subcategories
                                                                    </p>
                                                                    <p class="text-muted">Description</p>
                                                                    <button type="button"
                                                                        onclick="play_video(/*video_id,video_url*/)"
                                                                        class="btn btn-primary btn-sm">Play</button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="verify-section my-5">
                                                                <button type="button" class="btn btn-primary btn-sm"
                                                                    data-toggle="collapse" data-target="#verify-sect"
                                                                    aria-expanded="false" aria-controls="verify-sect">
                                                                    Verify
                                                                </button>
                                                                <div class="collapse" id="verify-sect">
                                                                    <div class="card card-body">
                                                                        <div class="form-group">
                                                                            <label for="cost-per-video">Cost Per
                                                                                Video</label>
                                                                            <input type="number" class="form-control"
                                                                                name="cost-per-video"
                                                                                id="cost-per-video" min="0"
                                                                                placeholder="Cost per video">

                                                                        </div>
                                                                        <button type="button" onclick="verify(/**/)"
                                                                            class="btn btn-primary btn-sm">
                                                                            submit
                                                                        </button>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="reject-section my-5 mx-5">
                                                                <button type="button" class="btn btn-primary btn-sm"
                                                                    data-toggle="collapse" data-target="#reject-sect"
                                                                    aria-expanded="false" aria-controls="reject-sect">
                                                                    Reject
                                                                </button>
                                                                <div class="collapse" id="reject-sect">
                                                                    <div class="card card-body">
                                                                        <div class="form-group">
                                                                            <label for="comment">Comment</label>
                                                                            <textarea class="form-control"
                                                                                name="comment" id="comment"
                                                                                rows="3"></textarea>
                                                                        </div>
                                                                        <button type="button" onclick="reject(/**/)"
                                                                            class="btn btn-primary btn-sm">
                                                                            submit
                                                                        </button>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-lg-3 col-md-3 col-sm-3">
                                                <div class="fix">
                                                    <ul id="episodes-right">
                                                        <!-- <li>
                                                        <a href="#section1">section1</a>
                                                        </li>
                                                        <li>
                                                            <a href="#section2">section2</a>
                                                        </li>
                                                        <li>
                                                            <a href="#section3">section3</a>
                                                        </li> -->
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Added movie section  -->
                    <div class="tab-pane fade" id="list-added-movie" role="tabpanel"
                        aria-labelledby="list-added-movie-list">
                        <p>Added movie</p>
                    </div>
                    <!-- Added series section  -->
                    <div class="tab-pane fade" id="list-added-series" role="tabpanel"
                        aria-labelledby="list-added-series-list">
                        <div class="series__added__form">
                            <div class="list-group flex-md-row" id="list-added-series-tab" role="tablist">
                                <a class="list-group-item list-group-item-action active mx-5 text-center"
                                    id="list-added-seriesform-list" data-toggle="list" href="#list-added-seriesform"
                                    role="tab" aria-controls="list-added-seriesform">Series</a>
                                <a class="list-group-item list-group-item-action mx-5 text-center"
                                    id="list-added-seriesinfo-list" data-toggle="list" href="#list-added-seriesinfo"
                                    role="tab" aria-controls="list-added-seriesinfo">Seasons</a>
                                <a class="list-group-item list-group-item-action mx-5 text-center"
                                    id="list-added-seasoninfo-list" data-toggle="list" href="#list-added-seasoninfo"
                                    role="tab" aria-controls="list-added-seasoninfo">Episodes</a>
                            </div>
                            <div class="tab-content my-5" id="nav-tabContent">
                                <div class="tab-pane fade show active" id="list-added-seriesform" role="tabpanel"
                                    aria-labelledby="list-added-seriesform-list">
                                    <!-- added series  -->
                                    <div class="adding__series">
                                        <div class="row">
                                            <div class="col-lg-9 col-md-9 col-sm-9">
                                                <div class="container my-5">
                                                    <h4 class="my-4">Series name</h4>
                                                    <div class="row">
                                                        <!-- thumbnail  -->
                                                        <div class="col-lg-6 col-md-6 col-sm-6">
                                                            <img src="{% static "home/img/imge.png" %}" alt="uploading"
                                                                class="img-fluid">
                                                        </div>
                                                        <!-- content  -->
                                                        <div class="col-lg-6 col-md-6 col-sm-6">
                                                            <div class="content mx-3">
                                                                <p class="text-muted">Language,Categories,Subcategories
                                                                </p>
                                                                <p class="text-muted">Description</p>
                                                                <button type="button" class="btn btn-primary">naviagate
                                                                    to seasons</button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="container my-5">
                                                    <h4 class="my-4">Series name</h4>
                                                    <div class="row">
                                                        <!-- thumbnail  -->
                                                        <div class="col-lg-6 col-md-6 col-sm-6">
                                                            <img src="{% static "home/img/imge.png" %}" alt="uploading"
                                                                class="img-fluid">
                                                        </div>
                                                        <div class="col-lg-6 col-md-6 col-sm-6">
                                                            <div class="content mx-3">
                                                                <p class="text-muted">Language,Categories,Subcategories
                                                                </p>
                                                                <p class="text-muted">Description</p>
                                                                <button type="button" class="btn btn-primary">naviagate
                                                                    to seasons</button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-lg-3 col-md-3 col-sm-3">
                                                <div class="fix">
                                                    <ul id="verified-series-right">

                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="tab-pane fade" id="list-added-seriesinfo" role="tabpanel"
                                    aria-labelledby="list-added-seriesinfo-list">
                                    <!-- verified seasons  -->
                                    <div class="series__info my-5">
                                        <div class="row">
                                            <div class="col-lg-9 col-md-9 col-sm-9">
                                                <div id="verified-get-seasons">

                                                </div>
                                            </div>
                                            <div class="col-lg-3 col-md-3 col-sm-3">
                                                <div class="fix">
                                                    <ul id="verified-seasons-right">

                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="tab-pane fade" id="list-added-seasoninfo" role="tabpanel"
                                    aria-labelledby="list-added-seasoninfo-list">
                                    <!-- verified episodes -->
                                    <div class="series__info my-5">
                                        <div class="row">
                                            <div class="col-lg-9 col-md-9 col-sm-9">
                                                <div id="verified-get-episodes">

                                                </div>
                                            </div>
                                            <div class="col-lg-3 col-md-3 col-sm-3">
                                                <div class="fix">
                                                    <ul id="verified-episodes-right">

                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- playing videos in modal  -->
    <!-- Modal -->

    <div class="modal fade" id="video-in-modal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle"
        aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    {% include "templates/videoplayer.html" %}
                </div>
            </div>
        </div>
    </div>
    {% include "templates/footfooter.html" %}
    <script src="{% static "/js/admin.js" %}"></script>
    <script src="{% static "/js/videoplayer.js" %}"></script>

    <script>
        // get all the series initially
        function get_series(){
            var data={
            }
            var formData=new FormData();
            formData.append('data', JSON.stringify(data));
            $.ajax({
                type: 'POST',
                url: '{% url "get_series" %}',
                data: formData,
                dataType: 'json',
                enctype: 'multipart/form-data',
                processData: false,
                contentType: false,
                success: function (data) {
                    if (data.is_successful != '') {
                        for(var ind in data.series){
                            var sub_data=data.series[ind];
                            ind++;
                            var series_data=sub_data[ind];
                            var sub="";
                            for(index in series_data[8]){
                                sub+=","+series_data[8][index];
                            }
                            var htmlgen='<div class="container my-5" id="series'+series_data[0]+'"><h4 class="my-4">'+series_data[2]+'</h4><div class="row"><div class="col-lg-8 col-md-8 col-sm-8"><img id="series'+series_data[0]+'thumbnail" src="'+series_data[7]+'" class="img-fluid"></div><div class="col-lg-4 col-md-4 col-sm-4"><div class="mx-2"><p>'+series_data[5]+','+series_data[4]+sub+'</p><p>'+series_data[3]+'</p><button onclick="move_to_season('+series_data[0]+','+series_data[1]+')" class="btn btn-primary btn-sm">seasons</button></div></div></div></div>';
                            $('#get-series').append(htmlgen);
                            $('#series-right').append('<li><a href="#series' + series_data[0] + '">' + series_data[2] + '</a></li>');
                        }
                    } else {
                        alert('Some unexpected error has occured. Try again.');
                    }
                }
            });
        }
        // ajax call for getting seasons for a particular series
        function move_to_season( /*series_id*/ ) {
            $('#list-seriesinfo-list').css('pointer-events', 'all');
            $('#list-seriesinfo-list').tab('show');
            // var data = {
            //     'series_id': series_id,
            // }
            // var formData = new FormData();
            // formData.append('data', JSON.stringify(data));
            // $.ajax({
            //     type: 'POST',
            //     url: '',
            //     data: formData,
            //     dataType: 'json',
            //     enctype: 'multipart/form-data',
            //     processData: false,
            //     contentType: false,
            //     success: function (data) {
            //         if (data.is_series_exists != '') {
            //             alert(data.is_series_exists);
            //         } else if (data.is_successful != '') {


            //             // allow to open seasons tab
            //             $('#list-seriesinfo-list').css('pointer-events', 'all');
            //         } else {
            //             alert('Some unexpected error has occured. Try again.');
            //         }
            //     }
            // });
        }


        // ajax call for getting seasons for a particular series
        function move_to_episode( /*series_id,series_season_id*/ ) {
            $('#list-seasoninfo-list').css('pointer-events', 'all');
            $('#list-seasoninfo-list').tab('show');
            // var data = {
            //     'series_id': series_id,
            //     'series_season_id':series_season_id,
            // }
            // var formData = new FormData();
            // formData.append('data', JSON.stringify(data));
            // $.ajax({
            //     type: 'POST',
            //     url: '',
            //     data: formData,
            //     dataType: 'json',
            //     enctype: 'multipart/form-data',
            //     processData: false,
            //     contentType: false,
            //     success: function (data) {
            //         if (data.is_series_season_exists != '') {
            //             alert(data.is_series_exists);
            //         } else if (data.is_successful != '') {


            //             // allow to open episodes tab
            //             $('#list-seasoninfo-list').css('pointer-events', 'all');
            //             $('#list-seasoninfo-list').tab('show');
            //         } else {
            //             alert('Some unexpected error has occured. Try again.');
            //         }
            //     }
            // });
        }

        function play_video(video_id, video_url) {
            // Add code to launch modal by getting
            $('#insert-video').attr('src', video_url);
            document.getElementById('video').load();
            $('.progress__filled').css('flex', '0');
            $('#video-in-modal').modal('show');
        }
        // once modal is closed remove the video
        $('#video-in-modal').on('hide.bs.modal', function (e) {
            document.getElementById('video').pause();
        })
        // restrict on moving from series directly to other two part
        $('#list-seriesform-list').on('show.bs.tab', function (e) {
            $('#list-seriesinfo-list').css('pointer-events', 'none');
            $('#list-seasoninfo-list').css('pointer-events', 'none');
        })
        $('#list-added-seriesform-list').on('show.bs.tab', function (e) {
            $('#list-added-seriesinfo-list').css('pointer-events', 'none');
            $('#list-added-seasoninfo-list').css('pointer-events', 'none');
        })
        // restrict on moving from season directly to other episode
        $('#list-seriesinfo-list').on('show.bs.tab', function (e) {
            $('#list-seasoninfo-list').css('pointer-events', 'none');
        })
        $('#list-added-seriesinfo-list').on('show.bs.tab', function (e) {
            $('#list-added-seasoninfo-list').css('pointer-events', 'none');
        })
    </script>
</body>

</html>