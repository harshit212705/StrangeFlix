{% load static %}
{% include "templates/headheader.html" %}
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css"
    integrity="sha384-9gVQ4dYFwwWSjIDZnLEWnxCjeSWFphJiwGPXr1jddIhOegiu1FwO5qRGvFXOdJZ4" crossorigin="anonymous">

<link rel="stylesheet" href="{% static "/css/admin.css" %}">
<link rel="stylesheet" href="{% static "/css/videoplayer.css" %}">
</head>

<body>
    <div class="main__section">
        <div class="row">
            <div class="col-xl-2 col-lg-2 col-md-2 col-sm-2">
                <div class="wrapper ">
                    <!-- Sidebar  -->
                    <nav id="sidebar">
                        <div class="sidebar-header">
                            <h3>Admin</h3>
                        </div>
                        <!-- <div class="list-group" id="list-tab" role="tablist"> -->
                        <ul class="list-unstyled components">
                            <li>
                                <div class="list-group" id="list-tab" role="tablist">
                                    <a class="special active" id="list-home-list" data-toggle="list" href="#list-home"
                                        role="tab" aria-controls="home">Home</a>
                                </div>
                            </li>
                            <!-- users  -->
                            <li>
                                <div class="list-group" id="list-tab" role="tablist">
                                    <a class="special" id="list-users-list" data-toggle="list" href="#list-users"
                                        role="tab" aria-controls="users">Users</a>
                                </div>
                            </li>
                            <!-- pending content  -->
                            <li>
                                <a href="#homeSubmenu" data-toggle="collapse" aria-expanded="false"
                                    class="dropdown-toggle">Pending</a>
                                <ul class="collapse list-unstyled list-group" id="homeSubmenu" role="tablist">
                                    <li>
                                        <a class="special" id="list-movie-list" data-toggle="list" href="#list-movie"
                                            role="tab" aria-controls="movie">Movies</a>
                                    </li>
                                    <li>
                                        <a class="special" id="list-series-list" data-toggle="list" href="#list-series"
                                            role="tab" aria-controls="series">series</a>
                                    </li>
                                </ul>
                            </li>
                            <!-- verified content  -->
                            <li>
                                <a href="#addedContentSubmenu" data-toggle="collapse" aria-expanded="false"
                                    class="dropdown-toggle">Added content</a>
                                <ul class="collapse list-unstyled list-group" id="addedContentSubmenu" role="tablist">
                                    <li>
                                        <a class="special" id="list-added-movie-list" data-toggle="list"
                                            href="#list-added-movie" role="tab" aria-controls="movie">Movies</a>
                                    </li>
                                    <li>
                                        <a class="special" id="list-added-series-list" data-toggle="list"
                                            href="#list-added-series" role="tab" aria-controls="series">Series</a>
                                    </li>
                                </ul>
                            </li>
                            <li>
                                <a href="{% url "account_logout" %}">Logout</a>
                            </li>
                        </ul>
                    </nav>
                </div>
            </div>
            <div class="col-xl-8 col-lg-8 col-md-8 col-sm-10  media-full">
                <!-- content  to be displayed on the middle of the page-->
                <div class="tab-content" id="nav-tabContent">
                    <div class="tab-pane fade show active" id="list-home" role="tabpanel"
                        aria-labelledby="list-home-list">
                     
                    </div>
                    <div class="tab-pane fade show" id="list-users" role="tabpanel" aria-labelledby="list-users-list">
                        <div class="series__added__form">
                            <div class="list-group flex-md-row" id="list-user-tab" role="tablist">
                                <a class="list-group-item list-group-item-action active mx-5 text-center"
                                    id="list-usertable-list" data-toggle="list" href="#list-usertable" role="tab"
                                    aria-controls="list-usertable">users</a>
                                <a class="list-group-item list-group-item-action mx-5 text-center"
                                    id="list-changeuser-list" data-toggle="list" href="#list-changeuser" role="tab"
                                    aria-controls="list-changeuser">Change usertype</a>
                            </div>
                            <div class="tab-content my-5" id="nav-tabContent">
                                <div class="tab-pane fade show active" id="list-usertable" role="tabpanel"
                                    aria-labelledby="list-usertable-list">
                                    <div class="container my-5">
                                        <div class="row">
                                            <form class="form-inline my-3">
                                                <input class="form-control mr-sm-2" id="sear-tx" type="search"
                                                    placeholder="Search" aria-label="Search">
                                                <button class="btn btn-outline-primary my-2 my-sm-0"
                                                    type="button">Search</button>
                                            </form>
                                        </div>
                                        <div class="row">
                                            <table class="table">
                                                <thead>
                                                    <tr>
                                                        <th scope="col">ID</th>
                                                        <th scope="col">USERNAME</th>
                                                        <th scope="col">EMAIL ADDRESS</th>
                                                        <th scope="col">USER TYPE</th>
                                                        <th scope="col">Change User Type</th>
                                                    </tr>
                                                </thead>
                                                <tbody id="insert-users">

                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                                <div class="tab-pane fade ad-m-list" id="list-changeuser" role="tabpanel"
                                    aria-labelledby="list-changeuser-list">
                                    <div class="episode__info">
                                        <p id="user_id" hidden></p>
                                        <form id="change-userform">
                                            <div class="form-group my-4">
                                                <div class="row pado">
                                                    <div class="col-lg-3 col-md-3 col-sm-3">
                                                        <label class="mt-2">User Id</label>
                                                    </div>
                                                    <div class="col-lg-3 col-md-3 col-sm-3">
                                                        <input type="text" readonly name="user-id"
                                                            class="form-control-plaintext" id="user-id" value="1">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group my-4">
                                                <div class="row pado">
                                                    <div class="col-lg-3 col-md-3 col-sm-3">
                                                        <label class="mt-2">User type</label>
                                                    </div>
                                                    <div class="col-lg-4 col-md-4 col-sm-4">
                                                        <select id="user-category" name="series-category"
                                                            class="custom-select">
                                                            <option value="U" selected>User</option>
                                                            <option value="P">Provider</option>
                                                            <option value="A">Admin</option>
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="padding-adder">
                                                <button type="submit" id="user-change-submit"
                                                    class="btn btn-primary my-4">Submit</button>
                                            </div>
                                        </form>
                                        <div id="chnge-user">

                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                    <div class="tab-pane fade" id="list-movie" role="tabpanel" aria-labelledby="list-movie-list">
                        <div class="series__added__form">
                            <div class="list-group flex-md-row" id="list-movie-tab" role="tablist">
                                <a class="list-group-item list-group-item-action active mx-5 text-center"
                                    id="list-movieform-list" data-toggle="list" href="#list-movieform" role="tab"
                                    aria-controls="list-movieform">Movies</a>
                                <a class="list-group-item list-group-item-action mx-5 text-center"
                                    id="list-movieinfo-list" data-toggle="list" href="#list-movieinfo" role="tab"
                                    aria-controls="list-movieinfo">Videos</a>
                            </div>
                            <div class="tab-content my-5" id="nav-tabContent">
                                <div class="tab-pane fade show active" id="list-movieform" role="tabpanel"
                                    aria-labelledby="list-movieform-list">
                                    <div class="series__info my-5">
                                        <div class="row">

                                            <div id="get-movies">

                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="tab-pane fade ad-m-list" id="list-movieinfo" role="tabpanel"
                                    aria-labelledby="list-movieinfo-list">
                                    <div class="episode__info">
                                        <div class="row">
                                            <!-- add season videos  -->

                                            <p id="movie_season_id" hidden></p>
                                            <!-- contents -->
                                            <div id="movie_uploaded_content">
                                                <!-- container here  -->
                                            </div>
                                            <hr>
                                            <!-- episodes  -->
                                            <div id="movie_uploaded_episodes">
                                                <!-- container here  -->
                                            </div>

                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="tab-pane fade" id="list-series" role="tabpanel" aria-labelledby="list-series-list">
                        <div class="series__form">
                            <div class="list-group flex-md-row" id="list-series-tab" role="tablist">
                                <a class="list-group-item list-group-item-action active mx-5 text-center"
                                    id="list-seriesform-list" data-toggle="list" href="#list-seriesform" role="tab"
                                    aria-controls="seriesform">Series</a>
                                <a class="list-group-item list-group-item-action mx-5 text-center"
                                    id="list-seriesinfo-list" data-toggle="list" href="#list-seriesinfo" role="tab"
                                    aria-controls="next">Seasons</a>
                                <a class="list-group-item list-group-item-action mx-5 text-center"
                                    id="list-seasoninfo-list" data-toggle="list" href="#list-seasoninfo" role="tab"
                                    aria-controls="next">Episodes</a>
                            </div>
                            <div class="tab-content my-5" id="nav-tabContent">
                                <div class="tab-pane fade show active" id="list-seriesform" role="tabpanel"
                                    aria-labelledby="list-home-list">
                                    <div class="series__info my-5">
                                        <div class="row">

                                            <div id="get-series">

                                            </div>

                                        </div>
                                    </div>
                                </div>
                                <div class="tab-pane fade" id="list-seriesinfo" role="tabpanel"
                                    aria-labelledby="list-seriesinfo-list">
                                    <div class="season__info">
                                        <!-- info about series  -->
                                        <div id="server-series-result">

                                        </div>
                                        <div class="add__season">
                                            <p id="series_id" hidden></p>
                                            <div class="row">

                                                <div id="apnd">
                                                    
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="tab-pane fade" id="list-seasoninfo" role="tabpanel"
                                    aria-labelledby="list-seasoninfo-list">
                                    <div class="episode__info">
                                        <div id="server-result">
                                        </div>
                                        <div class="row">
                                            <!-- add season videos  -->

                                            <div class="add__season__videos">
                                                <p id="series_season_id" hidden></p>
                                                <div id="uploaded_content">

                                                </div>
                                                <hr>
                                                <div id="uploaded_episodes">
                                                    
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Added movie section  -->
                    <div class="tab-pane fade" id="list-added-movie" role="tabpanel"
                        aria-labelledby="list-added-movie-list">
                        <div class="series__added__form">
                            <div class="list-group flex-md-row" id="list-added-movie-tab" role="tablist">
                                <a class="list-group-item list-group-item-action active mx-5 text-center"
                                    id="list-added-movieform-list" data-toggle="list" href="#list-added-movieform"
                                    role="tab" aria-controls="list-added-movieform">Movies</a>
                                <a class="list-group-item list-group-item-action mx-5 text-center"
                                    id="list-added-movieinfo-list" data-toggle="list" href="#list-added-movieinfo"
                                    role="tab" aria-controls="list-added-movieinfo">Videos</a>
                            </div>
                            <div class="tab-content my-5" id="nav-tabContent">
                                <div class="tab-pane fade show active" id="list-added-movieform" role="tabpanel"
                                    aria-labelledby="list-added-movieform-list">
                                    <div class="series__info my-5">
                                        <div class="row">

                                            <div id="get-verified-movies">

                                            </div>

                                        </div>
                                    </div>
                                </div>
                                <div class="tab-pane fade ad-m-list" id="list-added-movieinfo" role="tabpanel"
                                    aria-labelledby="list-added-movieinfo-list">
                                    <div class="episode__info">
                                        <div class="row">
                                            <!-- add season videos  -->
                                            <p id="movie_verified_season_id" hidden></p>
                                            <!-- contents -->
                                            <div id="movie_verified_uploaded_content">
                                                <!-- container here  -->
                                            </div>
                                            <hr>
                                            <!-- episodes  -->
                                            <div id="movie_verified_uploaded_episodes">
                                                <!-- container here  -->
                                            </div>

                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Added series section  -->
                    <div class="tab-pane fade" id="list-added-series" role="tabpanel"
                        aria-labelledby="list-added-series-list">
                        <div class="series__added__form">
                            <div class="list-group flex-md-row" id="list-added-series-tab" role="tablist">
                                <a class="list-group-item list-group-item-action active mx-5 text-center"
                                    id="list-added-seriesform-list" data-toggle="list" href="#list-added-seriesform"
                                    role="tab" aria-controls="list-added-seriesform">Series</a>
                                <a class="list-group-item list-group-item-action mx-5 text-center"
                                    id="list-added-seriesinfo-list" data-toggle="list" href="#list-added-seriesinfo"
                                    role="tab" aria-controls="list-added-seriesinfo">Seasons</a>
                                <a class="list-group-item list-group-item-action mx-5 text-center"
                                    id="list-added-seasoninfo-list" data-toggle="list" href="#list-added-seasoninfo"
                                    role="tab" aria-controls="list-added-seasoninfo">Episodes</a>
                            </div>
                            <div class="tab-content my-5" id="nav-tabContent">
                                <div class="tab-pane fade show active" id="list-added-seriesform" role="tabpanel"
                                    aria-labelledby="list-added-seriesform-list">
                                    <!-- added series  -->
                                    <div class="adding__series">
                                        <div class="row">
                                            <div id="verified-get-series">
                                                
    
                                            </div>

                                        </div>
                                    </div>
                                </div>
                                <div class="tab-pane fade" id="list-added-seriesinfo" role="tabpanel"
                                    aria-labelledby="list-added-seriesinfo-list">
                                    <!-- verified seasons  -->
                                    <div class="series__info my-5">
                                        <div class="row">
                                            <p id="added_series_id" hidden></p>

                                            <div id="verified-get-seasons">

                                            </div>


                                        </div>
                                    </div>
                                </div>
                                <div class="tab-pane fade" id="list-added-seasoninfo" role="tabpanel"
                                    aria-labelledby="list-added-seasoninfo-list">
                                    <!-- verified episodes -->
                                    <div class="series__info my-5">
                                        <div class="row">

                                            <div id="verified-get-content">

                                            </div>
                                            <hr>
                                            <div id="verified-get-episodes">

                                            </div>

                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-xl-2 col-lg-2 col-md-2 fade-on-small">
                <nav class="fix">
                    <!-- pending-series-right  -->
                    <ul id="series-right">

                    </ul>
                    <!-- pending-season-right  -->
                    <ul id="season-right">

                    </ul>
                    <!-- pending-content-right  -->
                    <ul id="content-right">

                    </ul>
                    <!-- pending-episodes-right  -->
                    <ul id="episodes-right">

                    </ul>
                    <!-- verified-series-right  -->
                    <ul id="verified-series-right">

                    </ul>
                    <!-- verified-season-right  -->
                    <ul id="verified-season-right">

                    </ul>
                    <!-- verified-content-right  -->
                    <ul id="verified-content-right">

                    </ul>
                    <!-- verified-episodes-right  -->
                    <ul id="verified-episodes-right">

                    </ul>
                    <!-- pending-movies-right  -->
                    <ul id="movies-right">

                    </ul>
                    <!-- pending-movies-content-right  -->
                    <ul id="movies-content-right">

                    </ul>
                    <!-- pending-movies-vido-right  -->
                    <ul id="movies-video-right">

                    </ul>
                    <!-- verified-movies-right  -->
                    <ul id="verified-movies-right">

                    </ul>
                    <!-- verified-movies-content-right  -->
                    <ul id="verified-movies-content-right">

                    </ul>
                    <!-- verified-movies-vido-right  -->
                    <ul id="verified-movies-video-right">

                    </ul>
                </nav>
            </div>
        </div>
    </div>
    <!-- playing videos in modal  -->
    <!-- Modal -->

    <div class="modal fade" id="video-in-modal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle"
        aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    {% include "templates/videoplayer.html" %}
                </div>
            </div>
        </div>
    </div>


    <!-- showing comments in modal  -->
    <div class="modal fade" id="comments-in-modal" tabindex="-1" role="dialog" aria-labelledby="comm-ent"
        aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="comm-ent">Comments</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    
                </div>
            </div>
        </div>
    </div>
    {% include "templates/footfooter.html" %}
    <script src="{% static "/js/admin.js" %}"></script>
    <script src="{% static "/js/videoplayer.js" %}"></script>

    <!-- to truncate the extra hash in url -->
    <script type="text/javascript">
        if (window.location.hash === "#_=_") {
            history.replaceState ?
                history.replaceState(null, null, window.location.href.split("#")[0]) :
                window.location.hash = "";
        }
    </script>

    <script>
        // get all the pending series
        function get_series() {

            // Emptying the main content displaying area
            $('#get-series').empty();
            $('#apnd').empty();
            $('#uploaded_content').empty();
            $('#uploaded_episodes').empty();

            // Emptying the right navigation bars that is to be used here
            $('#series-right').empty();

            set_navigation_bars('block', 'none', 'none', 'none', 'none', 'none', 'none', 'none', 'none', 'none', 'none',
                'none', 'none', 'none');

            var formData = new FormData();

            $.ajax({
                type: 'POST',
                url: '{% url "get_series" %}',
                data: formData,
                dataType: 'json',
                enctype: 'multipart/form-data',
                processData: false,
                contentType: false,
                success: function (data) {
                    // checking and handling error conditions
                    if (data.is_any_pending_series_exists != '') {
                        var htmlgen = '<div><p>' + data.is_any_pending_series_exists + '</p></div>';
                        $('#get-series').append(htmlgen);
                    }
                    if (data.is_successful != '') {

                        // appending the already uploaded series
                        for (var key in data.pending_series_data) {
                            var htmlgen = '<div id="series' + key +
                                '" class="container my-5"><h4 class="text-secondary font-weight-bold my-4">' +
                                data.pending_series_data[key]
                                [0] +
                                '<i class="arro text-secondary right mx-1"></i></h4><div class="row"><div class="col-lg-6 col-md-6 col-sm-6"><img src="{% static "/images/img_prev.gif"%}" data-src="' +
                                data.pending_series_data[key][5] +
                                '" alt="uploading" class="img-fluid"></div><div class="col-lg-6 col-md-6 col-sm-6"><div class="content mx-3"><p class="font-weight-bold">' +
                                data.pending_series_data[key][3] + ' | ';

                            for (var i = 0; i < data.pending_series_data[key][6].length; i++) {
                                htmlgen += data.pending_series_data[key][6][i] + ' | ';
                            }

                            htmlgen += data.pending_series_data[key][2] +
                                '</p><div class="middle-section"><p>' + data.pending_series_data[key][1] +
                                '</p></div><div class="position-absolute" style="bottom:0"><p class="font-weight-bold text-primary">Provider - ' +
                                data.pending_series_data[key][7] +
                                '</p><button type="button" class="btn btn-primary btn-sm" onclick="go_to_seasons(' +
                                key + ')">Go to seasons</button></div></div></div></div></div>';
                            $('#get-series').append(htmlgen);

                            // appending already uploaded series to right navigation
                            $('#series-right').append('<li><a href="#series' + key + '">' + data
                                .pending_series_data[key][0] + ' - ' + data.pending_series_data[key][
                                    7
                                ] + '</a></li>');
                        }
                        callit();
                    } else {
                        alert('Some unexpected error has occured. Try again.');
                    }
                }
            });
        }


        // function to view seasons in added content section
        function go_to_seasons(series_id) {

            document.getElementById('series_id').innerHTML = series_id;

            // emptying the already uploaded seasons section and right navigation section
            $('#apnd').empty();
            $('#season-right').empty();

            set_navigation_bars('none', 'block', 'none', 'none', 'none', 'none', 'none', 'none', 'none', 'none', 'none',
                'none', 'none', 'none');

            // javascript data object
            var data = {
                'series_id': series_id,
            }

            // adding data to javascript form which is to be send over ajax request
            var formData = new FormData();
            formData.append('data', JSON.stringify(data));

            $.ajax({
                type: 'POST',
                url: '{% url "pending_uploaded_seasons" %}',
                data: formData,
                dataType: 'json',
                enctype: 'multipart/form-data',
                processData: false,
                contentType: false,
                success: function (data) {
                    // checking and handling error conditions
                    if (data.is_any_series_season_exists != '') {
                        var htmlgen = '<div><p>' + data.is_any_series_season_exists + '</p></div>';
                        $('#apnd').append(htmlgen);
                    } else if (data.is_successful != '') {
                        // appending the already uploaded seasons
                        for (var key in data.all_series_season_data) {
                            var htmlgen = '<div id="season' + key +
                                '" class="container my-5"><h4 class="text-secondary font-weight-bold my-4">Season ' +
                                data
                                .all_series_season_data[key][0] +
                                '<i class="arro text-secondary right mx-1"></i></h4><div class="row"><div class="col-lg-6 col-md-6 col-sm-6"><img src="{% static "/images/img_prev.gif"%}" data-src="' +
                                data.all_series_season_data[key][3] +
                                '" alt="uploading" class="img-fluid"></div><div class="col-lg-6 col-md-6 col-sm-6"><div class="content mx-3"><div class="middle-section"><p>' +
                                data.all_series_season_data[key][1] +
                                '</p></div><div class="position-absolute" style="bottom:0"><button type="button" class="btn btn-primary btn-sm" onclick="go_to_episodes(' +
                                key + ')">Go to episodes</button></div></div></div></div></div>';
                            $('#apnd').append(htmlgen);

                            // appending the already uploaded seasons to right navigation
                            $('#season-right').append('<li><a href="#season' + key + '">season' + data
                                .all_series_season_data[key][0] + '</a></li>');
                        }
                        callit();
                        // restricting pointer events for other tabs
                        $('#list-seriesform-list').css('pointer-events', 'all');
                        $('#list-seriesinfo-list').css('pointer-events', 'all');
                        $('#list-seasoninfo-list').css('pointer-events', 'none');
                        $('#list-seriesinfo-list').tab('show');

                    } else {
                        alert('Some unexpected error has occured. Try again.');
                    }
                }
            });
        }


        // function when admin wants to see the uploaded episodes in pending content section
        function go_to_episodes(series_season_id) {

            // emptying the already uploaded episodes section and right navigation section
            $('#uploaded_episodes').empty();
            $('#uploaded_content').empty();
            $('#episodes-right').empty();
            $('#content-right').empty();

            set_navigation_bars('none', 'none', 'block', 'block', 'none', 'none', 'none', 'none', 'none', 'none',
                'none', 'none', 'none', 'none');

            // javascript data object
            var data = {
                'series_season_id': series_season_id,
            }

            // adding data to javascript form which is to be send over ajax request
            var formData = new FormData();
            formData.append('data', JSON.stringify(data));

            $.ajax({
                type: 'POST',
                url: '{% url "pending_uploaded_episodes" %}',
                data: formData,
                dataType: 'json',
                enctype: 'multipart/form-data',
                processData: false,
                contentType: false,
                success: function (data) {
                    // checking and handling error conditions
                    if (data.is_series_season_exists != '') {
                        var htmlgen = '<div><p>' + data.is_series_season_exists + '</p></div>';
                        $('#uploaded_episodes').append(htmlgen);
                    } else if (data.is_successful != '') {

                        // appending the already uploaded episodes
                        for (var key in data.season_episode_data) {
                            var specialol = `'${data.season_episode_data[key][4]}'`;
                            // curr mins spend
                            var currmins = Math.floor(data.season_episode_data[key][7] / 60);

                            // curr secs spend
                            var currsecs = Math.floor(data.season_episode_data[key][7] - currmins *
                                60);

                            if (currsecs < 10) {
                                currsecs = "0" + currsecs;
                            }
                            if (currmins < 10) {
                                currmins = "0" + currmins;
                            }
                            var htmlgen = '<div id="episode' + data.season_episode_data[key][0] +
                                '" class="container my-5"><h4 class="text-secondary font-weight-bold my-4">Episode ' + data
                                .season_episode_data[key][6] + ' - ' + data.season_episode_data[key][1] +
                                '<i class="arro text-secondary right mx-1"></i></h4><div class="row"><div class="col-lg-6 col-md-6 col-sm-6" style="cursor:pointer"><div class="position-absolute" style="width:100%;height:100%;z-index:1;background-image:linear-gradient(to bottom,rgba(25,33,51,0) 80%,#272B2C 100%);"'+'onclick="play_video(' +data.season_episode_data[key][0] + ',' + specialol +
                                ')"' + '><div class="position-absolute mx-2 my-2" style="bottom:0"><span style="font-size:1rem;color:white;"><i class="fas fa-play"></i></span>' +
                                '<span class="font-weight-bold mx-3" style="color:white">' +
                                currmins +
                                ':' + currsecs + '</span>' +
                                '<span class="font-weight-bold" style="color:white;right:0">' + data
                                .season_episode_data[key][5] + '</span></div></div><img id="episode' +
                                data.season_episode_data[key][0] + 'thumbnail" src="{% static "/images/img_prev.gif"%}" data-src="' + data
                                .season_episode_data[key][3] +
                                '" alt="uploading" class="img-fluid"></div><div class="col-lg-6 col-md-6 col-sm-6"><div class="content mx-3"><div class="upper-section"><span class="font-weight-bold">';

                            for (var i = 0; i < data.season_episode_data[key][9].length; i++) {
                                htmlgen += data.season_episode_data[key][9][i] + ' | ';
                            }

                            htmlgen +='</span></div><div class="middle-section"><p>' + data
                                .season_episode_data[key][2] +
                                '</p></div><div class="position-absolute" style="bottom:0;"><button type="button" class="btn btn-primary btn-sm mx-1" onclick="play_video(' +
                                data.season_episode_data[key][0] + ',' + specialol +
                                ')">Play video</button><span class="verify-section mx-1"><button type="button" class="btn btn-primary btn-sm" data-toggle="collapse" data-target="#verify-sect' +
                                data.season_episode_data[key][0] +
                                '" aria-expanded="false" aria-controls="verify-sect' + data
                                .season_episode_data[key][0] +
                                '">Verify</button><div class="collapse" id="verify-sect' + data
                                .season_episode_data[key][0] +
                                '"><div class="card card-body"><div class="form-group"><label for="cost-per-video">Cost Per Video</label><input type="number" class="form-control" name="cost-per-video" id="cost-per-video' +
                                data.season_episode_data[key][0] +
                                '" value=0 min="0" placeholder="Cost per video"></div><button type="button" onclick="verify_video(' +
                                data.season_episode_data[key][0] + ',' + `'series_episode'` +
                                ')" class="btn btn-primary btn-sm">submit</button></div></div></span><span class="reject-section mx-1"><button type="button" class="btn btn-primary btn-sm" data-toggle="collapse" data-target="#reject-sect' +
                                data.season_episode_data[key][0] +
                                '" aria-expanded="false" aria-controls="reject-sect' + data
                                .season_episode_data[key][0] +
                                '">Reject</button><div class="collapse" id="reject-sect' + data
                                .season_episode_data[key][0] +
                                '"><div class="card card-body"><div class="form-group"><label for="comment">Comment</label><textarea class="form-control" name="comment" id="comment' +
                                data.season_episode_data[key][0] +
                                '" rows="3"></textarea></div><button type="button" onclick="reject_video(' +
                                data.season_episode_data[key][0] + ',' + `'series_episode'` +
                                ')" class="btn btn-primary btn-sm">submit</button></div></div></span></div></div></div></div></div>';

                            $('#uploaded_episodes').append(htmlgen);

                            // appending the already uploaded episodes to right navigation
                            $('#episodes-right').append('<li id="li_episode' + data.season_episode_data[key]
                                [0] + '"><a href="#episode' + data.season_episode_data[key][0] +
                                '">episode' + data.season_episode_data[key][6] + '</a></li>');
                        }


                        // appending the already uploaded free content
                        var count = 1;
                        for (var key in data.season_content_data) {
                            var specialol = `'${data.season_content_data[key][4]}'`;
                            // curr mins spend
                            var currmins = Math.floor(data.season_content_data[key][6] / 60);

                            // curr secs spend
                            var currsecs = Math.floor(data.season_content_data[key][6] - currmins * 60);

                            if (currsecs < 10) {
                                currsecs = "0" + currsecs;
                            }
                            if (currmins < 10) {
                                currmins = "0" + currmins;
                            }
                            var htmlgen = '<div id="content' + data.season_content_data[key][0] +
                                '" class="container my-5"><h4 class="text-secondary font-weight-bold my-4">Content ' + count + ' - ' + data
                                .season_content_data[key][1] +
                                '<i class="arro text-secondary right mx-1"></i></h4><div class="row"><div class="col-lg-6 col-md-6 col-sm-6" style="cursor:pointer"><div class="position-absolute" style="width:100%;height:100%;z-index:1;background-image:linear-gradient(to bottom,rgba(25,33,51,0) 80%,#272B2C 100%);"' +
                                'onclick="play_video(' +
                                data.season_content_data[key][0] + ',' + specialol +
                                ')"' +
                                '><div class="position-absolute mx-2 my-2" style="bottom:0"><span style="font-size:1rem;color:white;"><i class="fas fa-play"></i></span>' +
                                '<span class="font-weight-bold mx-3" style="color:white">' +
                                currmins +
                                ':' + currsecs + '</span>' +
                                '<span class="font-weight-bold" style="color:white;right:0">' + data
                                .season_content_data[key][5] + '</span></div></div><img id="content' +
                                data.season_content_data[key][0] + 'thumbnail" src="{% static "/images/img_prev.gif"%}" data-src="' + data
                                .season_content_data[key][3] +
                                '" alt="uploading" class="img-fluid"></div><div class="col-lg-6 col-md-6 col-sm-6"><div class="content mx-3"><div class="upper-section"><span class="font-weight-bold">';
                                

                            for (var i = 0; i < data.season_content_data[key][8].length; i++) {
                                htmlgen += data.season_content_data[key][8][i] + ' | ';
                            }

                            htmlgen += '</span></div><div class="middle-section"><p>' + data
                                .season_content_data[key][2] +
                                '</p></div><div class="position-absolute" style="bottom:0;"><button type="button" onclick="play_video(' +
                                data.season_content_data[key][0] + ',' + specialol +
                                ')" class="btn btn-primary btn-sm mx-1">Play video</button><span class="verify-section mx-1"><button type="button" onclick="verify_video(' +
                                data.season_content_data[key][0] + ',' + `'series_content'` +
                                ')" class="btn btn-primary btn-sm">Verify</button></span><span class="reject-section mx-1"><button type="button" class="btn btn-primary btn-sm" data-toggle="collapse" data-target="#reject-sect' +
                                data.season_content_data[key][0] +
                                '" aria-expanded="false" aria-controls="reject-sect' + data
                                .season_content_data[key][0] +
                                '">Reject</button><div class="collapse" id="reject-sect' + data
                                .season_content_data[key][0] +
                                '"><div class="card card-body"><div class="form-group"><label for="comment">Comment</label><textarea class="form-control" name="comment" id="comment' +
                                data.season_content_data[key][0] +
                                '" rows="3"></textarea></div><button type="button" onclick="reject_video(' +
                                data.season_content_data[key][0] + ',' + `'series_content'` +
                                ')" class="btn btn-primary btn-sm">submit</button></span></div></div></div></div></div>';

                            $('#uploaded_content').append(htmlgen);

                            // appending the already uploaded episodes to right navigation
                            $('#content-right').append('<li id="li_content' + data.season_content_data[key][
                                    0
                                ] + '"><a href="#content' + data.season_content_data[key][0] +
                                '">content' + count + '</a></li>');

                            count++;
                        }
                        callit();
                        // restricting pointer events for other tabs
                        $('#list-seriesform-list').css('pointer-events', 'all');
                        $('#list-seriesinfo-list').css('pointer-events', 'all');
                        $('#list-seasoninfo-list').css('pointer-events', 'all');
                        $('#list-seasoninfo-list').tab('show');

                    } else {
                        alert('Some unexpected error has occured. Try again.');
                    }
                }
            });
        }


        // get all the pending movies
        function get_movies() {

            // Emptying the main content displaying area
            $('#get-movies').empty();
            $('#movie_uploaded_content').empty();
            $('#movie_uploaded_episodes').empty();

            // Emptying the right navigation bars that is to be used here
            $('#movies-right').empty();

            set_navigation_bars('none', 'none', 'none', 'none', 'none', 'none', 'none', 'none', 'block', 'none', 'none',
                'none', 'none', 'none');

            var formData = new FormData();

            $.ajax({
                type: 'POST',
                url: '{% url "get_movies" %}',
                data: formData,
                dataType: 'json',
                enctype: 'multipart/form-data',
                processData: false,
                contentType: false,
                success: function (data) {
                    // checking and handling error conditions
                    if (data.is_any_pending_movie_exists != '') {
                        var htmlgen = '<div><p>' + data.is_any_pending_movie_exists + '</p></div>';
                        $('#get-movies').append(htmlgen);
                    }
                    if (data.is_successful != '') {

                        // appending the already uploaded movies
                        for (var key in data.pending_movies_data) {
                            var htmlgen = '<div id="movie' + key +
                                '" class="container my-5"><h4 class="text-secondary font-weight-bold my-4">' + data.pending_movies_data[key]
                                [0] +
                                '<i class="arro text-secondary right mx-1"></i></h4><div class="row"><div class="col-lg-6 col-md-6 col-sm-6"><img src="{% static "/images/img_prev.gif"%}" data-src="' +
                                data.pending_movies_data[key][4] +
                                '" alt="uploading" class="img-fluid"></div><div class="col-lg-6 col-md-6 col-sm-6"><div class="content mx-3"><p class="font-weight-bold">';

                            for (var i = 0; i < data.pending_movies_data[key][5].length; i++) {
                                htmlgen += data.pending_movies_data[key][5][i] + ' | ';
                            }

                            htmlgen +=  data.pending_movies_data[key][2] +
                                '</p><div class="middle-section"><p>' + data.pending_movies_data[key][1] +
                                '</p></div><div class="position-absolute" style="bottom:0"><p class="font-weight-bold text-primary">Provider - ' + data.pending_movies_data[key][6] +
                                '</p><button type="button" class="btn btn-primary btn-sm" onclick="go_to_movie_videos(' +
                                key + ')">Go to videos</button></div></div></div></div></div>';
                            $('#get-movies').append(htmlgen);

                            // appending already uploaded series to right navigation
                            $('#movies-right').append('<li><a href="#movie' + key + '">' + data
                                .pending_movies_data[key][0] + ' - ' + data.pending_movies_data[key][
                                    6
                                ] + '</a></li>');
                        }
                        callit();
                    } else {
                        alert('Some unexpected error has occured. Try again.');
                    }
                }
            });
        }


        // function when admin wants to see the uploaded episodes in pending content section
        function go_to_movie_videos(movie_id) {

            // emptying the already uploaded episodes section and right navigation section
            $('#movie_uploaded_episodes').empty();
            $('#movie_uploaded_content').empty();
            $('#movies-video-right').empty();
            $('#movies-content-right').empty();

            set_navigation_bars('none', 'none', 'none', 'none', 'none', 'none', 'none', 'none', 'none', 'block',
                'block', 'none', 'none', 'none');

            // javascript data object
            var data = {
                'movie_id': movie_id,
            }

            // adding data to javascript form which is to be send over ajax request
            var formData = new FormData();
            formData.append('data', JSON.stringify(data));

            $.ajax({
                type: 'POST',
                url: '{% url "pending_movie_videos" %}',
                data: formData,
                dataType: 'json',
                enctype: 'multipart/form-data',
                processData: false,
                contentType: false,
                success: function (data) {
                    // checking and handling error conditions
                    if (data.is_movie_exists != '') {
                        var htmlgen = '<div><p>' + data.is_movie_exists + '</p></div>';
                        $('#movie_uploaded_episodes').append(htmlgen);
                    } else if (data.is_successful != '') {

                        // appending the already uploaded video
                        for (var key in data.movie_episode_data) {
                            var specialol = `'${data.movie_episode_data[key][4]}'`;
                            // curr mins spend
                            var currmins = Math.floor(data.movie_episode_data[key][6] / 60);

                            // curr secs spend
                            var currsecs = Math.floor(data.movie_episode_data[key][6] - currmins *
                                60);

                            if (currsecs < 10) {
                                currsecs = "0" + currsecs;
                            }
                            if (currmins < 10) {
                                currmins = "0" + currmins;
                            }
                            var htmlgen = '<div id="movie_video' + data.movie_episode_data[key][0] +
                                '" class="container my-5"><h4 class="text-secondary font-weight-bold my-4">Movie Video - ' + data
                                .movie_episode_data[key][1] +
                                '<i class="arro text-secondary right mx-1"></i></h4><div class="row"><div class="col-lg-6 col-md-6 col-sm-6" style="cursor:pointer"><div class="position-absolute" style="width:100%;height:100%;z-index:1;background-image:linear-gradient(to bottom,rgba(25,33,51,0) 80%,#272B2C 100%);"'+'onclick="play_video(' +data.movie_episode_data[key][0] + ',' + specialol +
                                ')"' + '><div class="position-absolute mx-2 my-2" style="bottom:0"><span style="font-size:1rem;color:white;"><i class="fas fa-play"></i></span>' +
                                '<span class="font-weight-bold mx-3" style="color:white">' +
                                currmins +
                                ':' + currsecs + '</span>' +
                                '<span class="font-weight-bold" style="color:white;right:0">' + data
                                .movie_episode_data[key][5] + '</span></div></div><img id="movie_video' +
                                data.movie_episode_data[key][0] + 'thumbnail" src="{% static "/images/img_prev.gif"%}" data-src="' + data
                                .movie_episode_data[key][3] +
                                '" alt="uploading" class="img-fluid"></div><div class="col-lg-6 col-md-6 col-sm-6"><div class="content mx-3"><div class="upper-section"><span class="font-weight-bold">';

                            for (var i = 0; i < data.movie_episode_data[key][8].length; i++) {
                                htmlgen += data.movie_episode_data[key][8][i] + ' | ';
                            }

                            htmlgen +='</span></div><div class="middle-section"><p>' + data
                                .movie_episode_data[key][2] +
                                '</p></div><div class="position-absolute" style="bottom:0"><button type="button" class="btn btn-primary btn-sm mx-1" onclick="play_video(' +
                                data.movie_episode_data[key][0] + ',' + specialol +
                                ')">Play video</button><span class="verify-section mx-1"><button type="button" class="btn btn-primary btn-sm" data-toggle="collapse" data-target="#verify-sect' +
                                data.movie_episode_data[key][0] +
                                '" aria-expanded="false" aria-controls="verify-sect' + data
                                .movie_episode_data[key][0] +
                                '">Verify</button><div class="collapse" id="verify-sect' + data
                                .movie_episode_data[key][0] +
                                '"><div class="card card-body"><div class="form-group"><label for="cost-per-video">Cost Per Video</label><input type="number" class="form-control" name="cost-per-video" id="cost-per-video' +
                                data.movie_episode_data[key][0] +
                                '" value=0 min="0" placeholder="Cost per video"></div><button type="button" onclick="verify_video(' +
                                data.movie_episode_data[key][0] + ',' + `'movies_episode'` +
                                ')" class="btn btn-primary btn-sm">submit</button></div></div></span><span class="reject-section mx-1"><button type="button" class="btn btn-primary btn-sm" data-toggle="collapse" data-target="#reject-sect' +
                                data.movie_episode_data[key][0] +
                                '" aria-expanded="false" aria-controls="reject-sect' + data
                                .movie_episode_data[key][0] +
                                '">Reject</button><div class="collapse" id="reject-sect' + data
                                .movie_episode_data[key][0] +
                                '"><div class="card card-body"><div class="form-group"><label for="comment">Comment</label><textarea class="form-control" name="comment" id="comment' +
                                data.movie_episode_data[key][0] +
                                '" rows="3"></textarea></div><button type="button" onclick="reject_video(' +
                                data.movie_episode_data[key][0] + ',' + `'movies_episode'` +
                                ')" class="btn btn-primary btn-sm">submit</button></div></div></span></div></div></div></div></div>';

                            $('#movie_uploaded_episodes').append(htmlgen);

                            // appending the already uploaded episodes to right navigation
                            $('#movies-video-right').append('<li id="li_movie_video' + data
                                .movie_episode_data[key][0] + '"><a href="#movie_video' + data
                                .movie_episode_data[key][0] + '">movie video</a></li>');
                        }


                        // appending the already uploaded free content
                        var count = 1;
                        for (var key in data.movie_content_data) {
                            var specialol = `'${data.movie_content_data[key][4]}'`;
                            // curr mins spend
                            var currmins = Math.floor(data.movie_content_data[key][6] / 60);

                            // curr secs spend
                            var currsecs = Math.floor(data.movie_content_data[key][6] - currmins * 60);

                            if (currsecs < 10) {
                                currsecs = "0" + currsecs;
                            }
                            if (currmins < 10) {
                                currmins = "0" + currmins;
                            }
                            var htmlgen = '<div id="movie_content' + data.movie_content_data[key][0] +
                                '" class="container my-5"><h4 class="text-secondary font-weight-bold my-4">Content ' + count + ' - ' + data
                                .movie_content_data[key][1] +
                                '<i class="arro text-secondary right mx-1"></i></h4><div class="row"><div class="col-lg-6 col-md-6 col-sm-6" style="cursor:pointer"><div class="position-absolute" style="width:100%;height:100%;z-index:1;background-image:linear-gradient(to bottom,rgba(25,33,51,0) 80%,#272B2C 100%);"' +
                                'onclick="play_video(' +
                                data.movie_content_data[key][0] + ',' + specialol +
                                ')"' +
                                '><div class="position-absolute mx-2 my-2" style="bottom:0"><span style="font-size:1rem;color:white;"><i class="fas fa-play"></i></span>' +
                                '<span class="font-weight-bold mx-3" style="color:white">' +
                                currmins +
                                ':' + currsecs + '</span>' +
                                '<span class="font-weight-bold" style="color:white;right:0">' + data
                                .movie_content_data[key][5] + '</span></div></div><img id="movie_content' +
                                data.movie_content_data[key][0] + 'thumbnail" src="{% static "/images/img_prev.gif"%}" data-src="' + data
                                .movie_content_data[key][3] +
                                '" alt="uploading" class="img-fluid"></div><div class="col-lg-6 col-md-6 col-sm-6"><div class="content mx-3"><span class="font-weight-bold">';

                            for (var i = 0; i < data.movie_content_data[key][8].length; i++) {
                                htmlgen += data.movie_content_data[key][8][i] + ' | ';
                            }

                            htmlgen +='</span><div class="middle-section"><p>' + data
                                .movie_content_data[key][2] +
                                '</p></div><div class="position-absolute" style="bottom:0;"><button type="button" class="btn btn-primary btn-sm mx-1" onclick="play_video(' +
                                data.movie_content_data[key][0] + ',' + specialol +
                                ')">Play video</button><span class="verify-section mx-1"><button type="button" onclick="verify_video(' +
                                data.movie_content_data[key][0] + ',' + `'movies_content'` +
                                ')" class="btn btn-primary btn-sm">Verify</button></span><span class="reject-section mx-1"><button type="button" class="btn btn-primary btn-sm" data-toggle="collapse" data-target="#reject-sect' +
                                data.movie_content_data[key][0] +
                                '" aria-expanded="false" aria-controls="reject-sect' + data
                                .movie_content_data[key][0] +
                                '">Reject</button><div class="collapse" id="reject-sect' + data
                                .movie_content_data[key][0] +
                                '"><div class="card card-body"><div class="form-group"><label for="comment">Comment</label><textarea class="form-control" name="comment" id="comment' +
                                data.movie_content_data[key][0] +
                                '" rows="3"></textarea></div><button type="button" onclick="reject_video(' +
                                data.movie_content_data[key][0] + ',' + `'movies_content'` +
                                ')" class="btn btn-primary btn-sm">submit</button></span></div></div></div></div></div>';

                            $('#movie_uploaded_content').append(htmlgen);

                            // appending the already uploaded episodes to right navigation
                            $('#movies-content-right').append('<li id="li_movie_content' + data
                                .movie_content_data[key][0] + '"><a href="#movie_content' + data
                                .movie_content_data[key][0] + '">content' + count + '</a></li>');

                            count++;
                        }
                        
                        callit();
                        // restricting pointer events for other tabs
                        $('#list-movieform-list').css('pointer-events', 'all');
                        $('#list-movieinfo-list').css('pointer-events', 'all');
                        $('#list-movieinfo-list').tab('show');

                    } else {
                        alert('Some unexpected error has occured. Try again.');
                    }
                }
            });
        }


        // function when admin wants to verify a video
        function verify_video(video_id, type) {

            // fetching form data
            var id = 'cost-per-video' + video_id;
            var cost_per_video = ''
            if (type == 'series_episode' || type == 'movies_episode') {
                var cost_per_video = document.getElementById(id).value;
            }

            // javascript data object
            var data = {
                'video_id': video_id,
                'type': type,
                'cost_per_video': cost_per_video,
            }

            // adding data to javascript form which is to be send over ajax request
            var formData = new FormData();
            formData.append('data', JSON.stringify(data));

            $.ajax({
                type: 'POST',
                url: '{% url "verify_video" %}',
                data: formData,
                dataType: 'json',
                enctype: 'multipart/form-data',
                processData: false,
                contentType: false,
                success: function (data) {
                    // checking and handling error conditions
                    if (data.is_video_exists != '') {
                        alert(data.is_video_exists);
                    } else if (data.is_video_already_evaluated != '') {
                        alert(data.is_video_already_evaluated);
                    } else if (data.is_cost_provided != '') {
                        alert(data.is_cost_provided);
                    } else if (data.is_successful != '') {

                        var id_to_be_removed = '#';
                        var li_id_to_be_removed = '#li_';
                        if (type == 'series_episode') {
                            id_to_be_removed += 'episode';
                            li_id_to_be_removed += 'episode';
                        } else if (type == 'series_content') {
                            id_to_be_removed += 'content';
                            li_id_to_be_removed += 'content';
                        } else if (type == 'movies_episode') {
                            id_to_be_removed += 'movie_video';
                            li_id_to_be_removed += 'movie_video';
                        } else if (type == 'movies_content') {
                            id_to_be_removed += 'movie_content';
                            li_id_to_be_removed += 'movie_content';
                        }

                        id_to_be_removed += data.video_id;
                        li_id_to_be_removed += data.video_id;

                        $(id_to_be_removed).remove();
                        $(li_id_to_be_removed).remove();

                        // restricting pointer events for other tabs
                        $('#list-seasoninfo-list').css('pointer-events', 'all');
                        $('#list-seasoninfo-list').tab('show');

                        alert(data.is_successful);

                    } else {
                        alert('Some unexpected error has occured. Try again.');
                    }
                }
            });
        }


        // function when admin wants to reject a video
        function reject_video(video_id, type) {

            // fetching form data
            var id = 'comment' + video_id;
            var comment = document.getElementById(id).value;

            // javascript data object
            var data = {
                'video_id': video_id,
                'type': type,
                'comment': comment,
            }

            // adding data to javascript form which is to be send over ajax request
            var formData = new FormData();
            formData.append('data', JSON.stringify(data));

            $.ajax({
                type: 'POST',
                url: '{% url "reject_video" %}',
                data: formData,
                dataType: 'json',
                enctype: 'multipart/form-data',
                processData: false,
                contentType: false,
                success: function (data) {
                    // checking and handling error conditions
                    if (data.is_video_exists != '') {
                        alert(data.is_video_exists);
                    } else if (data.is_video_already_evaluated != '') {
                        alert(data.is_video_already_evaluated);
                    } else if (data.is_comment_provided != '') {
                        alert(data.is_comment_provided);
                    } else if (data.is_successful != '') {

                        var id_to_be_removed = '#';
                        var li_id_to_be_removed = '#li_';
                        if (type == 'series_episode') {
                            id_to_be_removed += 'episode';
                            li_id_to_be_removed += 'episode';
                        } else if (type == 'series_content') {
                            id_to_be_removed += 'content';
                            li_id_to_be_removed += 'content';
                        } else if (type == 'movies_episode') {
                            id_to_be_removed += 'movie_video';
                            li_id_to_be_removed += 'movie_video';
                        } else if (type == 'movies_content') {
                            id_to_be_removed += 'movie_content';
                            li_id_to_be_removed += 'movie_content';
                        }

                        id_to_be_removed += data.video_id;
                        li_id_to_be_removed += data.video_id;

                        $(id_to_be_removed).remove();
                        $(li_id_to_be_removed).remove();

                        // restricting pointer events for other tabs
                        $('#list-seasoninfo-list').css('pointer-events', 'all');
                        $('#list-seasoninfo-list').tab('show');

                        alert(data.is_successful);

                    } else {
                        alert('Some unexpected error has occured. Try again.');
                    }
                }
            });
        }


        // get all the added or verified series
        function get_added_series() {

            // Emptying the main content displaying area
            $('#verified-get-series').empty();
            $('#verified-get-seasons').empty();
            $('#verified-get-content').empty();
            $('#verified-get-episodes').empty();

            // Emptying the right navigation bars that is to be used here
            $('#verified-series-right').empty();

            set_navigation_bars('none', 'none', 'none', 'none', 'block', 'none', 'none', 'none', 'none', 'none', 'none',
                'none', 'none', 'none');

            var formData = new FormData();

            $.ajax({
                type: 'POST',
                url: '{% url "added_series" %}',
                data: formData,
                dataType: 'json',
                enctype: 'multipart/form-data',
                processData: false,
                contentType: false,
                success: function (data) {
                    // checking and handling error conditions
                    if (data.is_any_verified_series_exists != '') {
                        var htmlgen = '<div><p>' + data.is_any_verified_series_exists + '</p></div>';
                        $('#verified-get-series').append(htmlgen);
                    }
                    if (data.is_successful != '') {
                        // appending the already uploaded series
                        for (var key in data.verified_series_data) {
                            var htmlgen = '<div id="series' + data.verified_series_data[key][0] +
                                '" class="container my-5"><h4 class="text-secondary font-weight-bold my-4">' + data.verified_series_data[
                                    key][0] +
                                '<i class="arro text-secondary right mx-1"></i></h4><div class="row"><div class="col-lg-6 col-md-6 col-sm-6"><img src="{% static "/images/img_prev.gif"%}" data-src="' +
                                data.verified_series_data[key][5] +
                                '" alt="uploading" class="img-fluid"></div><div class="col-lg-6 col-md-6 col-sm-6"><div class="content mx-3"><p class="font-weight-bold">' +
                                data.verified_series_data[key][3] + ' | ';

                            for (var i = 0; i < data.verified_series_data[key][6].length; i++) {
                                htmlgen += data.verified_series_data[key][6][i] + ' | ';
                            }

                            htmlgen +=  data.verified_series_data[key][2] +
                                '</p><div class="middle-section"><p>' + data.verified_series_data[key][1] +
                                '</p></div><div class="position-absolute" style="bottom:0"><p class="font-weight-bold text-primary">Provider - ' + data.verified_series_data[key][
                                    7
                                ] +
                                '</p><button type="button" class="btn btn-primary btn-sm" onclick="go_to_added_seasons(' +
                                key + ')">Go to seasons</button></div></div></div></div></div>';

                            $('#verified-get-series').append(htmlgen);

                            // appending already uploaded series to right navigation
                            $('#verified-series-right').append('<li><a href="#series' + data
                                .verified_series_data[key][0] + '">' + data.verified_series_data[key][
                                    0
                                ] + ' - ' + data.verified_series_data[key][7] + '</a></li>');
                        }
                        callit();
                    } else {
                        alert('Some unexpected error has occured. Try again.');
                    }
                }
            });
        }



        // function to view seasons in added content section
        function go_to_added_seasons(series_id) {

            document.getElementById('added_series_id').innerHTML = series_id;
            // emptying the already uploaded seasons section and right navigation section
            $('#verified-get-seasons').empty();
            $('#verified-season-right').empty();

            set_navigation_bars('none', 'none', 'none', 'none', 'none', 'block', 'none', 'none', 'none', 'none', 'none',
                'none', 'none', 'none');

            // javascript data object
            var data = {
                'series_id': series_id,
            }

            // adding data to javascript form which is to be send over ajax request
            var formData = new FormData();
            formData.append('data', JSON.stringify(data));

            $.ajax({
                type: 'POST',
                url: '{% url "added_seasons" %}',
                data: formData,
                dataType: 'json',
                enctype: 'multipart/form-data',
                processData: false,
                contentType: false,
                success: function (data) {
                    // checking and handling error conditions
                    if (data.is_any_series_season_exists != '') {
                        var htmlgen = '<div><p>' + data.is_any_series_season_exists + '</p></div>';
                        $('#verified-get-seasons').append(htmlgen);
                    } else if (data.is_successful != '') {
                        // appending the already uploaded seasons
                        for (var key in data.all_series_season_data) {
                            var decide_color = data.all_series_season_data[key][4] == "Pending" ?
                                "text-info" : (
                                    data.all_series_season_data[key][4] == "Rejected" ? "text-danger" :
                                    "text-success");
                            var htmlgen = '<div id="season' + key +
                                '" class="container my-5"><h4 class="text-secondary font-weight-bold my-4">Season ' + data
                                .all_series_season_data[key][0] +
                                '<i class="arro text-secondary right mx-1"></i></h4><div class="row"><div class="col-lg-6 col-md-6 col-sm-6"><img src="{% static "/images/img_prev.gif"%}" data-src="' +
                                data.all_series_season_data[key][3] +
                                '" alt="uploading" class="img-fluid"></div><div class="col-lg-6 col-md-6 col-sm-6"><div class="content mx-3"><div class="middle-section"><p>' +
                                data.all_series_season_data[key][1] +
                                '</p></div><div class="position-absolute" style="bottom:0"><p class="font-weight-bold '+ decide_color + '">Status - ' + data.all_series_season_data[key][
                                    4
                                ] +
                                '</p><button type="button" class="btn btn-primary btn-sm" onclick="go_to_added_episodes(' +
                                key + ')">Go to episodes</button></div></div></div></div></div>';

                            $('#verified-get-seasons').append(htmlgen);

                            // appending the already uploaded seasons to right navigation
                            $('#verified-season-right').append('<li><a href="#season' + key + '">season' +
                                data.all_series_season_data[key][0] + '</a></li>');

                        }
                        callit();
                        // restricting pointer events for other tabs
                        $('#list-added-seriesform-list').css('pointer-events', 'all');
                        $('#list-added-seriesinfo-list').css('pointer-events', 'all');
                        $('#list-added-seasoninfo-list').css('pointer-events', 'none');
                        $('#list-added-seriesinfo-list').tab('show');

                    } else {
                        alert('Some unexpected error has occured. Try again.');
                    }
                }
            });
        }



        // function when admin wants to see the uploaded episodes in added content section
        function go_to_added_episodes(series_season_id) {

            // emptying the already uploaded episodes section and right navigation section
            $('#verified-get-content').empty();
            $('#verified-get-episodes').empty();
            $('#verified-content-right').empty();
            $('#verified-episodes-right').empty();

            set_navigation_bars('none', 'none', 'none', 'none', 'none', 'none', 'block', 'block', 'none', 'none',
                'none', 'none', 'none', 'none');

            // javascript data object
            var data = {
                'series_season_id': series_season_id,
            }

            // adding data to javascript form which is to be send over ajax request
            var formData = new FormData();
            formData.append('data', JSON.stringify(data));

            $.ajax({
                type: 'POST',
                url: '{% url "added_episodes" %}',
                data: formData,
                dataType: 'json',
                enctype: 'multipart/form-data',
                processData: false,
                contentType: false,
                success: function (data) {
                    // checking and handling error conditions
                    if (data.is_series_season_exists != '') {
                        var htmlgen = '<div><p>' + data.is_series_season_exists + '</p></div>';
                        $('#verified-get-episodes').append(htmlgen);
                    } else if (data.is_successful != '') {
                        // appending the already uploaded episodes
                        for (var key in data.season_episode_data) {
                            var specialol = `'${data.season_episode_data[key][4]}'`;
                            // curr mins spend
                            var currmins = Math.floor(data.season_episode_data[key][7] / 60);

                            // curr secs spend
                            var currsecs = Math.floor(data.season_episode_data[key][7] - currmins *
                                60);

                            if (currsecs < 10) {
                                currsecs = "0" + currsecs;
                            }
                            if (currmins < 10) {
                                currmins = "0" + currmins;
                            }
                            var htmlgen = '<div id="episode' + data.season_episode_data[key][0] +
                                '" class="container my-5"><h4 class="text-secondary font-weight-bold my-4">Episode ' + data
                                .season_episode_data[key][6] + '-' + data.season_episode_data[key][1] +
                                '<i class="arro text-secondary right mx-1"></i></h4><div class="row"><div class="col-lg-6 col-md-6 col-sm-6" style="cursor:pointer"><div class="position-absolute" style="width:100%;height:100%;z-index:1;background-image:linear-gradient(to bottom,rgba(25,33,51,0) 80%,#272B2C 100%);"' +
                                'onclick="play_video(' +
                                data.season_episode_data[key][0] + ',' + specialol +
                                ')"' +
                                '><div class="position-absolute mx-2 my-2" style="bottom:0"><span style="font-size:1rem;color:white;"><i class="fas fa-play"></i></span>' +
                                '<span class="font-weight-bold mx-3" style="color:white">' +
                                currmins +
                                ':' + currsecs + '</span>' +
                                '<span class="font-weight-bold" style="color:white;right:0">' + data
                                .season_episode_data[key][5] +
                                '</span></div></div><img id="episode' +
                                data.season_episode_data[key][0] + 'thumbnail" src="{% static "/images/img_prev.gif"%}" data-src="' + data
                                .season_episode_data[key][3] +
                                '" alt="uploading" class="img-fluid"></div><div class="col-lg-6 col-md-6 col-sm-6"><div class="content mx-3"><div class="upper-section"><span class="font-weight-bold">';

                            for (var i = 0; i < data.season_episode_data[key][9].length; i++) {
                                htmlgen += data.season_episode_data[key][9][i] + ' | ';
                            }

                            htmlgen +='</span></div><div class="middle-section"><p>' + data
                                .season_episode_data[key][2] +
                                '</p></div><div class="position-absolute" style="bottom:0;"><button type="button" class="btn btn-primary btn-sm mx-1" onclick="play_video(' +
                                data.season_episode_data[key][0] + ',' + specialol +
                                ')" >Play video</button><button type="button" class="btn btn-primary btn-sm mx-1">Flags <span class="badge badge-light">9</span></button><button type="button" class="btn btn-primary btn-sm mx-1" onclick="delete_video(' +
                                ')" >Delete</button><button type="button" class="btn btn-primary btn-sm mx-1" onclick="get_comments(' +
                                ')" >Comments</button></div></div></div></div></div>';

                            $('#verified-get-episodes').append(htmlgen);

                            // appending the already uploaded episodes to right navigation
                            $('#verified-episodes-right').append('<li id="li_episode' + data
                                .season_episode_data[key][0] + '"><a href="#episode' + data
                                .season_episode_data[key][0] + '">episode' + data.season_episode_data[
                                    key][6] + '</a></li>');
                        }


                        // appending the already uploaded free content of series
                        var count = 1;
                        for (var key in data.season_content_data) {
                            var specialol = `'${data.season_content_data[key][4]}'`;
                            // curr mins spend
                            var currmins = Math.floor(data.season_content_data[key][6] / 60);

                            // curr secs spend
                            var currsecs = Math.floor(data.season_content_data[key][6] - currmins * 60);

                            if (currsecs < 10) {
                                currsecs = "0" + currsecs;
                            }
                            if (currmins < 10) {
                                currmins = "0" + currmins;
                            }
                            var htmlgen = '<div id="content' + data.season_content_data[key][0] +
                                '" class="container my-5"><h4 class="text-secondary font-weight-bold my-4">Content ' + count + ' - ' + data
                                .season_content_data[key][1] +
                                '<i class="arro text-secondary right mx-1"></i></h4><div class="row"><div class="col-lg-6 col-md-6 col-sm-6" style="cursor:pointer"><div class="position-absolute" style="width:100%;height:100%;z-index:1;background-image:linear-gradient(to bottom,rgba(25,33,51,0) 80%,#272B2C 100%);"' +
                                'onclick="play_video(' +
                                data.season_content_data[key][0] + ',' + specialol +
                                ')"' +
                                '><div class="position-absolute mx-2 my-2" style="bottom:0"><span style="font-size:1rem;color:white;"><i class="fas fa-play"></i></span>' +
                                '<span class="font-weight-bold mx-3" style="color:white">' +
                                currmins +
                                ':' + currsecs + '</span>' +
                                '<span class="font-weight-bold" style="color:white;right:0">' + data
                                .season_content_data[key][5] + '</span></div></div><img id="content' +
                                data.season_content_data[key][0] + 'thumbnail" src="{% static "/images/img_prev.gif"%}" data-src="' + data
                                .season_content_data[key][3] +
                                '" alt="uploading" class="img-fluid"></div><div class="col-lg-6 col-md-6 col-sm-6"><div class="content mx-3"><div class="upper-section"><span class="font-weight-bold">';

                            for (var i = 0; i < data.season_content_data[key][8].length; i++) {
                                htmlgen += data.season_content_data[key][8][i] + ' | ';
                            }

                            htmlgen +='</span></div><div class="middle-section"><p>' + data
                                .season_content_data[key][2] +
                                '</p></div><div class="position-absolute" style="bottom:0;"><button type="button" class="btn btn-primary btn-sm" onclick="play_video(' +
                                data.season_content_data[key][0] + ',' + specialol +
                                ')">Play video</button><button type="button" class="btn btn-primary btn-sm mx-1">Flags <span class="badge badge-light">9</span></button><button type="button" class="btn btn-primary btn-sm mx-1" onclick="delete_video(' +
                                ')" >Delete</button><button type="button" class="btn btn-primary btn-sm mx-1" onclick="get_comments(' +
                                ')" >Comments</button></div></div></div></div></div>';

                            $('#verified-get-content').append(htmlgen);

                            // appending the already uploaded episodes to right navigation
                            $('#verified-content-right').append('<li id="li_content' + data
                                .season_content_data[key][0] + '"><a href="#content' + data
                                .season_content_data[key][0] + '">content' + count + '</a></li>');

                            count++;
                        }
                        callit();
                        // restricting pointer events for other tabs
                        $('#list-added-seasoninfo-list').css('pointer-events', 'all');
                        $('#list-added-seasoninfo-list').tab('show');

                    } else {
                        alert('Some unexpected error has occured. Try again.');
                    }
                }
            });
        }



        // get all the added or verified movies
        function get_added_movies() {

            // Emptying the main content displaying area
            $('#get-verified-movies').empty();
            $('#movie_verified_uploaded_content').empty();
            $('#movie_verified_uploaded_episodes').empty();

            // Emptying the right navigation bars that is to be used here
            $('#verified-movies-right').empty();

            set_navigation_bars('none', 'none', 'none', 'none', 'none', 'none', 'none', 'none', 'none', 'none', 'none',
                'block', 'none', 'none');

            var formData = new FormData();

            $.ajax({
                type: 'POST',
                url: '{% url "added_movies" %}',
                data: formData,
                dataType: 'json',
                enctype: 'multipart/form-data',
                processData: false,
                contentType: false,
                success: function (data) {
                    // checking and handling error conditions
                    if (data.is_any_verified_movies_exists != '') {
                        var htmlgen = '<div><p>' + data.is_any_verified_movies_exists + '</p></div>';
                        $('#get-verified-movies').append(htmlgen);
                    }
                    if (data.is_successful != '') {
                        // appending the already uploaded movies
                        for (var key in data.verified_movies_data) {
                            var htmlgen = '<div id="movie' + key +
                                '" class="container my-5"><h4 class="text-secondary font-weight-bold my-4">' + data.verified_movies_data[
                                    key][0] +
                                '<i class="arro text-secondary right mx-1"></i></h4><div class="row"><div class="col-lg-6 col-md-6 col-sm-6"><img src="{% static "/images/img_prev.gif"%}" data-src="' +
                                data.verified_movies_data[key][4] +
                                '" alt="uploading" class="img-fluid"></div><div class="col-lg-6 col-md-6 col-sm-6"><div class="content mx-3"><p class="font-weight-bold">';

                            for (var i = 0; i < data.verified_movies_data[key][5].length; i++) {
                                htmlgen += data.verified_movies_data[key][5][i] + ' | ';
                            }

                            htmlgen +=  data.verified_movies_data[key][2] +
                                '</p><div class="middle-section"><p>' + data.verified_movies_data[key][1] +
                                '</p></div><div class="position-absolute" style="bottom:0"><p class="font-weight-bold text-primary">Provider - ' + data.verified_movies_data[key][
                                    6
                                ] +
                                '</p><button type="button" class="btn btn-primary btn-sm" onclick="go_to_added_movie_videos(' +
                                key + ')">Go to videos</button></div></div></div></div></div>';
                            $('#get-verified-movies').append(htmlgen);

                            // appending already uploaded movies to right navigation
                            $('#verified-movies-right').append('<li><a href="#movie' + key + '">' + data
                                .verified_movies_data[key][0] + ' - ' + data.verified_movies_data[key][
                                    6
                                ] + '</a></li>');
                        }
                        callit();
                    } else {
                        alert('Some unexpected error has occured. Try again.');
                    }
                }
            });
        }


        // function when admin wants to see the uploaded episodes in added content section
        function go_to_added_movie_videos(movie_id) {

            // emptying the already uploaded episodes section and right navigation section
            $('#movie_verified_uploaded_content').empty();
            $('#movie_verified_uploaded_episodes').empty();
            $('#verified-movies-content-right').empty();
            $('#verified-movies-video-right').empty();

            set_navigation_bars('none', 'none', 'none', 'none', 'none', 'none', 'none', 'none', 'none', 'none', 'none',
                'none', 'block', 'block');

            // javascript data object
            var data = {
                'movie_id': movie_id,
            }

            // adding data to javascript form which is to be send over ajax request
            var formData = new FormData();
            formData.append('data', JSON.stringify(data));

            $.ajax({
                type: 'POST',
                url: '{% url "added_movie_videos" %}',
                data: formData,
                dataType: 'json',
                enctype: 'multipart/form-data',
                processData: false,
                contentType: false,
                success: function (data) {
                    // checking and handling error conditions
                    if (data.is_movie_exists != '') {
                        var htmlgen = '<div><p>' + data.is_movie_exists + '</p></div>';
                        $('#movie_verified_uploaded_episodes').append(htmlgen);
                    } else if (data.is_successful != '') {
                        // appending the already uploaded episodes
                        for (var key in data.movie_video_data) {
                            var specialol = `'${data.movie_video_data[key][4]}'`;
                            // curr mins spend
                            var currmins = Math.floor(data.movie_video_data[key][6] / 60);

                            // curr secs spend
                            var currsecs = Math.floor(data.movie_video_data[key][6] - currmins *
                                60);

                            if (currsecs < 10) {
                                currsecs = "0" + currsecs;
                            }
                            if (currmins < 10) {
                                currmins = "0" + currmins;
                            }
                            var htmlgen = '<div id="movie_video' + data.movie_video_data[key][0] +
                                '" class="container my-5"><h4 class="text-secondary font-weight-bold my-4">Movie Video - ' + data
                                .movie_video_data[key][1] +
                                '<i class="arro text-secondary right mx-1"></i></h4><div class="row"><div class="col-lg-6 col-md-6 col-sm-6" style="cursor:pointer"><div class="position-absolute" style="width:100%;height:100%;z-index:1;background-image:linear-gradient(to bottom,rgba(25,33,51,0) 80%,#272B2C 100%);"'+'onclick="play_video(' +data.movie_episode_data[key][0] + ',' + specialol +
                                ')"' + '><div class="position-absolute mx-2 my-2" style="bottom:0"><span style="font-size:1rem;color:white;"><i class="fas fa-play"></i></span>' +
                                '<span class="font-weight-bold mx-3" style="color:white">' +
                                currmins +
                                ':' + currsecs + '</span>' +
                                '<span class="font-weight-bold" style="color:white;right:0">' + data
                                .movie_video_data[key][5] + '</span></div></div><img id="movie_video' +
                                data.movie_video_data[key][0] + 'thumbnail" src="{% static "/images/img_prev.gif"%}" data-src="' + data.movie_video_data[
                                    key][3] +
                                '" alt="uploading" class="img-fluid"></div><div class="col-lg-6 col-md-6 col-sm-6"><div class="content mx-3"><div class="upper-section"><span class="font-weight-bold">';

                            for (var i = 0; i < data.movie_video_data[key][8].length; i++) {
                                htmlgen += data.movie_video_data[key][8][i] + ' | ';
                            }

                            htmlgen +='</span></div><div class="middle-section"><p>' + data
                                .movie_video_data[key][2] +
                                '</p></div><div class="position-absolute" style="bottom:0"><button type="button" onclick="play_video(' +
                                data.movie_video_data[key][0] + ',' + specialol +
                                ')" class="btn btn-primary btn-sm">Play video</button><button type="button" class="btn btn-primary btn-sm mx-1">Flags <span class="badge badge-light">9</span></button><button type="button" class="btn btn-primary btn-sm mx-1" onclick="delete_video(' +
                                ')" >Delete</button><button type="button" class="btn btn-primary btn-sm mx-1" onclick="get_comments(' +
                                ')" >Comments</button></div></div></div></div></div>';

                            $('#movie_verified_uploaded_episodes').append(htmlgen);

                            // appending the already uploaded episodes to right navigation
                            $('#verified-movies-video-right').append('<li id="li_movie_video' + data
                                .movie_video_data[key][0] + '"><a href="#movie_video' + data
                                .movie_video_data[key][0] + '">movie video</a></li>');
                        }


                        // appending the already uploaded free content of series
                        var count = 1;
                        for (var key in data.movie_content_data) {
                            var specialol = `'${data.movie_content_data[key][4]}'`;
                            // curr mins spend
                            var currmins = Math.floor(data.movie_content_data[key][6] / 60);

                            // curr secs spend
                            var currsecs = Math.floor(data.movie_content_data[key][6] - currmins * 60);

                            if (currsecs < 10) {
                                currsecs = "0" + currsecs;
                            }
                            if (currmins < 10) {
                                currmins = "0" + currmins;
                            }
                            var htmlgen = '<div id="movie_content' + data.movie_content_data[key][0] +
                                '" class="container my-5"><h4 class="text-secondary font-weight-bold my-4">Content ' + count + ' - ' + data
                                .movie_content_data[key][1] +
                                '<i class="arro text-secondary right mx-1"></i></h4><div class="row"><div class="col-lg-6 col-md-6 col-sm-6" style="cursor:pointer"><div class="position-absolute" style="width:100%;height:100%;z-index:1;background-image:linear-gradient(to bottom,rgba(25,33,51,0) 80%,#272B2C 100%);"' +
                                'onclick="play_video(' +
                                data.movie_content_data[key][0] + ',' + specialol +
                                ')"' +
                                '><div class="position-absolute mx-2 my-2" style="bottom:0"><span style="font-size:1rem;color:white;"><i class="fas fa-play"></i></span>' +
                                '<span class="font-weight-bold mx-3" style="color:white">' +
                                currmins +
                                ':' + currsecs + '</span>' +
                                '<span class="font-weight-bold" style="color:white;right:0">' + data
                                .movie_content_data[key][5] + '</span></div></div><img id="movie_content' +
                                data.movie_content_data[key][0] + 'thumbnail" src="{% static "/images/img_prev.gif"%}" data-src="' + data
                                .movie_content_data[key][3] +
                                '" alt="uploading" class="img-fluid"></div><div class="col-lg-6 col-md-6 col-sm-6"><div class="content mx-3"><span class="font-weight-bold">';

                            for (var i = 0; i < data.movie_content_data[key][8].length; i++) {
                                htmlgen += data.movie_content_data[key][8][i] + ' | ';
                            }

                            htmlgen +='</span><div class="middle-section"><p>' + data
                                .movie_content_data[key][2] +
                                '</p></div><div class="position-absolute" style="bottom:0;"><button type="button" onclick="play_video(' +
                                data.movie_content_data[key][0] + ',' + specialol +
                                ')" class="btn btn-primary btn-sm">Play video</button><button type="button" class="btn btn-primary btn-sm mx-1">Flags <span class="badge badge-light">9</span></button><button type="button" class="btn btn-primary btn-sm mx-1" onclick="delete_video(' +
                                ')" >Delete</button><button type="button" class="btn btn-primary btn-sm mx-1" onclick="get_comments(' +
                                ')" >Comments</button></div></div></div></div></div>';

                            $('#movie_verified_uploaded_content').append(htmlgen);

                            // appending the already uploaded episodes to right navigation
                            $('#verified-movies-content-right').append('<li id="li_movie_content' + data
                                .movie_content_data[key][0] + '"><a href="#movie_content' + data
                                .movie_content_data[key][0] + '">content' + count + '</a></li>');

                            count++;
                        }
                        callit();
                        // restricting pointer events for other tabs
                        $('#list-added-movieinfo-list').css('pointer-events', 'all');
                        $('#list-added-movieinfo-list').tab('show');

                    } else {
                        alert('Some unexpected error has occured. Try again.');
                    }
                }
            });
        }
        // get all the pending series
        function search_users(search_text) {

            // Emptying the main content displaying area
            $('#insert-users').empty();


            set_navigation_bars('none', 'none', 'none', 'none', 'none', 'none', 'none', 'none', 'none', 'none', 'none',
                'none', 'none', 'none');
            var data = {
                'search_text': search_text,
            }
            var formData = new FormData();
            formData.append('data', JSON.stringify(data));
            $.ajax({
                type: 'POST',
                url: '{% url "search_users" %}',
                data: formData,
                dataType: 'json',
                enctype: 'multipart/form-data',
                processData: false,
                contentType: false,
                success: function (data) {
                    // checking and handling error conditions
                    if (data.is_any_user_exists != '') {
                        var htmlgen = '<div><p>' + data.is_any_user_exists + '</p></div>';
                        $('#get-series').append(htmlgen);
                    }
                    if (data.is_successful != '') {

                        // appending the already uploaded series
                        for (var key in data.users) {
                            var htmlgen = '<tr><th scope="row">' + data.users[key][0] + '<td>' + data.users[
                                    key][1] + '</td><td>' + data.users[key][2] + '</td><td>' + data.users[
                                    key][3] + '</td><td>' +
                                '<button class="btn btn-primary btn-sm" onclick="change_user_type(' + data
                                .users[key][0] + ')">Change user type</button>' + '</td></tr>';
                            $('#insert-users').append(htmlgen);
                        }
                    } else {
                        alert('Some unexpected error has occured. Try again.');
                    }
                }
            });
        }


        // function when admin wants to see the uploaded episodes in added content section
        function change_user_type(userId) {

            $('#user_id').html(userId);
            // emptying the data present in the 
            $('#chnge-user').empty();

            set_navigation_bars('none', 'none', 'none', 'none', 'none', 'none', 'none', 'block', 'none', 'none',
                'none', 'none', 'none', 'none');

            // javascript data object
            var data = {
                'user_id': userId,
            }

            // adding data to javascript form which is to be send over ajax request
            var formData = new FormData();
            formData.append('data', JSON.stringify(data));

            $.ajax({
                type: 'POST',
                url: '{% url "change_user_type" %}',
                data: formData,
                dataType: 'json',
                enctype: 'multipart/form-data',
                processData: false,
                contentType: false,
                success: function (data) {
                    // checking and handling error conditions
                    if (data.is_user_exists != '') {
                        var htmlgen = '<div><p>' + data.is_user_exists + '</p></div>';
                        $('#verified-get-episodes').append(htmlgen);
                    } else if (data.is_successful != '') {
                        for (var key in data.user_details) {
                            var userType = data.user_details[key][3];
                            if (userType == 'A')
                                $('#user-category option[value=A]').prop('selected', 'true');
                            else if (userType == 'P')
                                $('#user-category option[value=P]').prop('selected', 'true');
                            else
                                $('#user-category option[value=U]').prop('selected', 'true');
                            $('#user-id').attr('value', data.user_details[key][0]);
                            $('#chnge-user').append(htmlgen);
                            $('#list-changeuser-list').css('pointer-events', 'all');
                            $('#list-changeuser-list').tab('show');
                        }
                    } else {
                        alert('Some unexpected error has occured. Try again.');
                    }
                }
            });
        }

        // form to change the user type 
        $('#change-userform').submit(function (e) {
            e.preventDefault(); //prevent default action
            var user_id = $('#user-id').attr('value');
            var user_type = $('#user-category').find('option:selected').attr('value');

            var data = {
                'user_id': user_id,
                'user_type': user_type,
            }
            var formData = new FormData();
            formData.append('data', JSON.stringify(data));
            $('#user-change-submit').attr('disabled', 'true');

            $.ajax({
                type: 'POST',
                url: '{% url "update_user_type" %}',
                data: formData,
                dataType: 'json',
                enctype: 'multipart/form-data',
                processData: false,
                contentType: false,
                success: function (data) {
                    $('#user-change-submit').attr('disabled', false);
                    // checking and handling error conditions
                    if (data.is_user_exists != '') {
                        var htmlgen = '<div><p>' + data.is_user_exists + '</p></div>';
                        $('#verified-get-episodes').append(htmlgen);
                    } else if (data.is_successful != '') {
                        for (var key in data.user_details) {

                        }
                        $('#list-changeuser-list').css('pointer-events', 'none');
                        $('#insert-users').empty();
                        $('#sear-tx').val('');
                        $('#list-usertable-list').tab('show');
                        alert(data.is_successful);
                    } else {
                        alert('Some unexpected error has occured. Try again.');
                    }
                }
            });
        });

        function play_video(video_id, video_url) {
            // Add code to launch modal by getting
            $('#insert-video').attr('src', video_url);
            document.getElementById('video').load();
            $('.progress__filled').css('flex', '0');
            $('#video-in-modal').modal('show');
        }


        // once modal is closed remove the video
        $('#video-in-modal').on('hide.bs.modal', function (e) {
            document.getElementById('video').pause();
        })


        // restrict on moving from series directly to other two part
        $('#list-seriesform-list').on('click', function (e) {
            $('#list-seriesinfo-list').css('pointer-events', 'none');
            $('#list-seasoninfo-list').css('pointer-events', 'none');
            get_series();
        })


        $('#list-added-seriesform-list').on('click', function (e) {
            $('#list-added-seriesinfo-list').css('pointer-events', 'none');
            $('#list-added-seasoninfo-list').css('pointer-events', 'none');
            get_added_series();
        })


        // restrict on moving from season directly to other episode
        $('#list-seriesinfo-list').on('click', function (e) {
            $('#list-seasoninfo-list').css('pointer-events', 'none');
            var series_id = document.getElementById('series_id').innerHTML;
            go_to_seasons(series_id);
        })


        $('#list-added-seriesinfo-list').on('click', function (e) {
            $('#list-added-seasoninfo-list').css('pointer-events', 'none');
            var series_id = document.getElementById('added_series_id').innerHTML;
            go_to_added_seasons(series_id);
        })

        // restrict on moving from series directly to other two part
        $('#list-movieform-list').on('click', function (e) {
            $('#list-movieinfo-list').css('pointer-events', 'none');
            get_movies();
        })

        $('#list-added-movieform-list').on('click', function (e) {
            $('#list-added-movieinfo-list').css('pointer-events', 'none');

            get_added_movies();
        })

        // get user once clicked on list-users-left
        $('#list-usertable-list').on('click', function (e) {
            set_navigation_bars('none', 'none', 'none', 'none', 'none', 'none', 'none', 'none', 'none', 'none', 'none',
                'none', 'none', 'none');
            $('#list-changeuser-list').css('pointer-events', 'none');
            $('#insert-users').empty();
            $('#sear-tx').val('');
        })

        // search user
        $('#sear-tx').on('keyup', function (e) {
            var text = $('#sear-tx').val();
            search_users(text);
        })


        // lazy-loader
        let options = {
            rootMargin: '0px 0px -300px 0px',
            threshold: 0
        }

        let callback = (entries, observer) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    var src = entry.target.getAttribute('data-src');
                    entry.target.src = src;
                    observer.unobserve(entry.target);
                }
            });
        };

        let observer = new IntersectionObserver(callback, options);

        function callit() {
            var imge = document.querySelectorAll("[data-src]");

            imge.forEach(image => {
                observer.observe(image);
            })
        }
    </script>
</body>

</html>